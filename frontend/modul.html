<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset='utf-8'>
	<!--Google Fonts-->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&display=swap"
		  rel="stylesheet">
	<!---------------->
	<!--Font Awesome-->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<!---------------->
	<link rel="stylesheet" type='text/css' href="style/global_style.css">
	<link rel="stylesheet" type='text/css' href="style/moduldetail_style.css">
	<title>Uni-WOW</title>

	<!--Script für Nav-->
	<script src="script/navbar.js"></script>
	<script src="script/ajax.js"></script>
</head>
<body>
<header>
	<nav>
		<ul>
			<li class="navblock1">
				<a href="index.html">
					<img src="pictures/Icon_White.svg" alt="icon"/>
				</a>
			</li>
			<li class="navblock2"><a href="moduluebersicht.html">Module</a></li>
			<li class="navblock3">
				<a href="bewertungsuebersicht.html">Meine Bewertungen</a>
			</li>
			<li class="navblock4"><a href="profil.html">Profil</a></li>
		</ul>
	</nav>
</header>
<main class="moduldetail" id="moduldetail">
	<h1 class="ueberschrift" id="ueberschrift">Mathematik 2</h1>
	<section class="modul-infos" id="modul-infos">
	</section>
	<template class="modul-detail-template" id="modul-detail-template">
		<section class="modul">
			<section class="modul-info">
				<h3>Modulverantwortlicher:</h3>
				<p class="modul-verantwortlicher"/>
				<h3>Workload:</h3>
				<p class="modul-workload"/>
				<h3>Credits:</h3>
				<p class="modul-credits"/>
				<h3>Lernergebnisse:</h3>
				<p class="modul-lernergebnisse"/>
				<h3>Inhalte:</h3>
				<p class="modul-inhalte"/>
				<h3>Pr&uuml;fungsform:</h3>
				<p class="modul-pruefungsform"/>
			</section>
			<section class="modul-bewertung">
				<form class="fields">
					<section>
						<h3><label for="note">Note:</label></h3>
						<select name="note" id="note">
							<option value="eins">1</option>
							<option value="eins-drei">1.3</option>
							<option value="eins-sieben">1.7</option>
							<option value="zwei">2</option>
							<option value="zwei-drei">2.3</option>
							<option value="zwei-sieben">2.7</option>
							<option value="drei">3</option>
							<option value="drei-drei">3.3</option>
							<option value="drei-sieben">3.7</option>
							<option value="vier">4</option>
							<option value="vier-drei">4.3</option>
							<option value="vier-sieben">4.7</option>
							<option value="fuenf">5</option>
						</select>
					</section>
					<section class="bewertung">
						<h3><label for="bewertung">Bewertung:</label></h3>
						<textarea id="bewertung" rows="10" cols="30"></textarea>
						<section class="star-rating">
							<span class="fa fa-star star"></span>
							<span class="fa fa-star star"></span>
							<span class="fa fa-star star"></span>
							<span class="fa fa-star star"></span>
							<span class="fa fa-star star"></span>
						</section>
						<button type="submit" id="eingabe">Speichern</button>
					</section>
				</form>
			</section>
		</section>
	</template>
	<hr>
	<section class="bewertungsliste" id="bewertungsliste">
		<template class="kommentar-template" id="kommentar-template">
			<section class="kommentar">
				<section class="benutzer-info">
					<img alt="profilbild" class="profilepicture" src="pictures/dummy.jpg"/>
					<strong class="benutzername">Andi Arbeit</strong>
				</section>
				<section class="inhalt">
					<section class="bewertungstext">
						Sau cooles Fach! Fand das Pigeon Hole Principle
						mega interessant!
					</section>
					<section class="bewertungsvalue">
						<span class="fa fa-star checked"></span>
						<span class="fa fa-star checked"></span>
						<span class="fa fa-star checked"></span>
						<span class="fa fa-star checked"></span>
						<span class="fa fa-star checked"></span>
					</section>
				</section>
			</section>
		</template>
	</section>
</main>
</body>
<footer>
	<h4>Webanwendungen 2 - Praktikum<br>Backend Boys</h4>
	<a href="impressum.html">Impressum</a>
</footer>
</html>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const params = new URLSearchParams(window.location.search);
        const id = params.get('id');
        getData(id);
    });

    function getData(id) {
        ajaxGet(`http://localhost:8000/api/modul/gib/${id}`, (err, data) => {
            if (err) {
                console.log(err);
            } else {
                data = JSON.parse(data)
                console.log(data);

                document.getElementById('ueberschrift').innerHTML = data.Name;

                const infos = document.getElementById('modul-infos')
                const modul_template = document.getElementById('modul-detail-template');
                const modul = modul_template.content.cloneNode(true);
                console.log(data.Verantworlicher);
                modul.querySelector('.modul-verantwortlicher').textContent = `${data.Verantwortlicher.Vorname} ${data.Verantwortlicher.Nachname}`;
                modul.querySelector('.modul-workload').textContent = data.Workload;
                modul.querySelector('.modul-credits').textContent = data.Credits;
                modul.querySelector('.modul-lernergebnisse').textContent = data.Lernergebnisse;
                modul.querySelector('.modul-inhalte').textContent = data.Inhalte;
                modul.querySelector('.modul-pruefungsform').textContent = data.Prüfungsform;

                infos.appendChild(modul);

                const kommentare = document.getElementById('bewertungsliste')
                const kommentar_template = document.getElementById('kommentar-template')
                const kommentar = kommentar_template.content.cloneNode(true)
				kommentare.appendChild(kommentar)
            }
        })
    }
</script>